<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advanced Recipe Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
    <nav>
        <div class="nav-wrapper">
          <a href="#" class="brand-logo">Logo</a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li><a href="#">Home</a></li>
            <li><a href="#">World Recipes</a></li>
            <li><a href="#">Advanced</a></li>
            <li><a href="#">Saved</a></li>
          </ul>
        </div>
      </nav>

      <div class="row">
        <form class="col s6">
          <div class="row">
            <div class="input-field col s4">
              <input id="icon_prefix" type="text" class="validate">
              <label for="icon_prefix">Food</label>
              
            </div>
          </div>
        </form>
      </div>

      <div class="row">
        <p>Health Labels:</p>
        <label>
          <input type="checkbox" class="filled-in" id="vegan"/>
          <span>vegan</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="vegetarian"/>
          <span>vegetarian</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="peanut-free"/>
          <span>peanut-free</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="tree-nut-free"/>
          <span>tree-nut-free</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="alcohol-free"/>
          <span>alcohol-free</span>
        </label>
      </div>

      <div class="row">
        <p>Diet:</p>
        <label>
          <input type="checkbox" class="filled-in" id="balanced"/>
          <span>balanced</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="high-fiber"/>
          <span>high-fiber</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="high-protein"/>
          <span>high-protein</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="low-carb"/>
          <span>low-carb</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="low-fat"/>
          <span>low-fat</span>
        </label>
        <label>
          <input type="checkbox" class="filled-in" id="low-sodium"/>
          <span>low-sodium</span>
        </label>
      </div>

      <div class="row">
        <form class="col s12">
          <div class="row">
            <div class="input-field col s6">
              <input id="icon_prefix" type="text" class="validate minCalories">
              <label for="icon_prefix">Calories MIN</label>
            </div>
            <div class="input-field col s6">
              <input id="icon_prefix" type="text" class="validate maxCalories">
              <label for="icon_prefix">Calories MAX</label>
            </div>
          </div>
        </form>
      </div>

      <div class="row">
        <form class="col s12">
          <div class="row">
            <div class="input-field col s6">
              <input id="icon_prefix" type="text" class="validate numberOfIngredients">
              <label for="icon_prefix">Number of ingredients</label>
            </div>
          </div>
        </form>
      </div>

      <div class="row">
        <form class="col s12">
          <div class="row">
            <div class="input-field col s6">
              <input id="icon_prefix" type="text" class="validate excluded">
              <label for="icon_prefix">Exclude Ingredients</label>
            </div>
            <div class="input-field col s12">
              <a class="waves-effect waves-light btn resultsButton">Add to list</a>
            </div>
          </div>
        </form>
      </div>

      <div class="note">Click to uncollapse</div>
      <ul class="collapsible collapsibleStyle">
          
      </ul>
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
      <script>

        //Send a query URL to the Recipe Search API
        $(document).ready(function(){
        $('.collapsible').collapsible();
        });

        
        //foodSearchQuery
        var foodImage = ""
        var foodTitle = ""
        var ingredients = []
        var num = "2"
        var food = "chicken"
        var applicationID = "6c4c5067"
        var appKey = "56dd4a4b1dc04c1107300036e876fbf8"
        var queryURL = "https://api.edamam.com/search?q=" + food + "&app_id=" + applicationID + "&app_key=" + appKey + "&to=" + num

        $.ajax({
        url: queryURL,
        method: "GET"
        }).then(function(response) {

            //Limits the number of results for the collapse for loop
            var numberofRecipes = 1

            //For loop to add each recipe content into a collapsible list
            for (var i = 0; i <= numberofRecipes; i++) {
                foodTitle = response.hits[i].recipe.label
                foodImage = response.hits[i].recipe.image
                ingredients = response.hits[i].recipe.ingredientLines

                //collapsable layout
                var list = $("<li>")
                //div for Title
                var divTitle = $("<div>")
                //div for food information
                var divInfo = $("<div>")

                $(".collapsible").append(list)

                //give common and unique id's to each div
                divTitle.attr({ class:"collapsible-header material-icons", id:"foodHeader" + i })
                divInfo.attr({ class:"collapsible-body", id:"foodBody" + i})

                //Adds the recipe title and info to the collapse list
                list.append(divTitle)
                list.append(divInfo)
                
                //Stores unique div ID's to a variable
                var foodHeader = divTitle.attr("id")
                var foodBody = divInfo.attr("id")

                //Adds food label to collasible div
                $("#"+foodHeader).text(foodTitle)

                //Adds image to collabsible div
                var image = $("<img>")
                image.attr("src", foodImage)
                $("#" + foodBody).append(image)

                //Adds the recipe ingredients to collabsible div
                var text = $("<p>")
                text.text(ingredients)
                $("#" + foodBody).append(text)

            }

        });
      
        console.log($("#peanut-free").prop("checked"))

        //Return a row of checkboxes
        //When the checkboxes are clicked then it gets added onto the url
        
        //list of options
        //health label - checkboxes
        //diet - checkboxes
        //calories - two input boxes
        //ingredients number - input box
        //Time - maybe - two input boxes
        //excluded - input box
          
      </script>
      
</body>
</html>